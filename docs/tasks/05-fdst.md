# Task 05: FDSTレコード生成

## 概要
KF8のフローデータ構造（FDST）レコードを生成する。テキストの論理的な流れ（各セクションの開始位置）を定義する。

## 関連
- **spec.md参照**: §4.9
- **依存タスク**: Task 01（FDSTレコード位置とフロー数をMOBIヘッダーに記録）
- **GitHub Issue**: —

## 背景
FDSTレコードはKF8で使用される構造で、テキストの論理的な流れを定義する。各章の開始バイトオフセットを記録し、Kindleリーダーがコンテンツの構造を把握するために使用する。KF8-onlyでもKindle Paperwhite実機互換のために必須。

## 実装場所
- 新規ファイル: `internal/mobi/fdst.go`
- テストファイル: `internal/mobi/fdst_test.go`

## 要件

### FDSTレコード構造
- 識別子: "FDST" (0x46445354) — 4バイト
- エントリ数（テーブルの行数）— 4バイト
- オフセットテーブルの開始位置 — 4バイト（通常12）
- エントリ配列: 各エントリは開始オフセット(4バイト) + 終了オフセット(4バイト)

### エントリの意味
- 各エントリは1つのフロー（テキストセクション）の範囲を表す
- 開始オフセット: そのセクションの開始バイト位置（圧縮前のテキストバイト列内）
- 終了オフセット: そのセクションの終了バイト位置

### MVP（最小構成）
- 単一フロー: テキスト全体を1つのフローとして扱う
  - エントリ数: 1
  - エントリ: [0, テキスト長]

## データ構造

### FDSTRecord 構造体
- Entries: [][2]uint32 — [開始, 終了] のオフセットペア

## 実装ガイドライン
- MVPでは全テキストを1つのフローとして扱う（エントリ1つ）
- 将来的に章単位でフローを分割する拡張が可能な設計
- MOBIヘッダーのFDST flow count と FDST開始オフセット に値を設定
- `encoding/binary` + `binary.BigEndian` で書き込み

## テスト方針
- FDST識別子が "FDST" であること
- 単一フロー: エントリ数=1、範囲=[0, textLength]
- 複数フロー: 各エントリの範囲が正しいこと
- バイト列のサイズが 12 + エントリ数 * 8 であること

## 完了条件
- [ ] FDST構造体と生成関数
- [ ] 単一フロー生成（MVP）
- [ ] バイナリシリアライズ関数
- [ ] 全テストがパス
