# Task 04: FLIS/FCIS/EOFレコード生成

## 概要
Kindleリーダーがファイルを正しく認識するために必要な3つの固定レコード（FLIS、FCIS、End-of-file）を生成する。

## 関連
- **spec.md参照**: §4.10
- **依存タスク**: Task 01（FLIS/FCISレコード番号をMOBIヘッダーに記録）
- **GitHub Issue**: —

## 背景
FLIS（Fixed Layout Information Structure）、FCIS（File Compressed Information Structure）、End-of-fileレコードは、calibreおよびKindleGenが必ず生成する固定レコード群。Kindleリーダーの正常動作に必須。

## 実装場所
- 新規ファイル: `internal/mobi/fixed_records.go`
- テストファイル: `internal/mobi/fixed_records_test.go`

## 要件

### FLISレコード（36バイト固定）

| オフセット | サイズ | 値 |
|-----------|-------|-----|
| 0 | 4 | "FLIS" (0x464C4953) |
| 4 | 4 | 0x00000008 |
| 8 | 2 | 0x0041 |
| 10 | 2 | 0x0000 |
| 12 | 4 | 0x00000000 |
| 16 | 4 | 0xFFFFFFFF |
| 20 | 2 | 0x0001 |
| 22 | 2 | 0x0003 |
| 24 | 4 | 0x00000003 |
| 28 | 4 | 0x00000001 |
| 32 | 4 | 0xFFFFFFFF |

### FCISレコード（44バイト）
テキスト長のみ可変、残りは固定値。

| オフセット | サイズ | 値 |
|-----------|-------|-----|
| 0 | 4 | "FCIS" (0x46434953) |
| 4 | 4 | 0x00000014 |
| 8 | 4 | 0x00000010 |
| 12 | 4 | 0x00000001 |
| 16 | 4 | 0x00000000 |
| 20 | 4 | (テキスト長) |
| 24 | 4 | 0x00000000 |
| 28 | 4 | 0x00000020 |
| 32 | 4 | 0x00000008 |
| 36 | 2 | 0x0001 |
| 38 | 2 | 0x0001 |
| 40 | 4 | 0x00000000 |

### End-of-fileレコード（4バイト固定）
- 値: 0xE98E0D0A

### レコード配置順序
```
レコード0:      MOBIヘッダー + EXTHレコード + Full Name
レコード1〜N:   圧縮テキスト
レコードN+1〜M: 画像データ
NCXレコード（Task 14で追加される場合）
FDSTレコード
FLISレコード
FCISレコード
End-of-fileレコード
```

## データ構造
- FLISRecord: 36バイト固定のバイト列を返す関数
- FCISRecord: テキスト長を引数に取り、44バイトのバイト列を返す関数
- EOFRecord: 4バイト固定のバイト列を返す関数

## 実装ガイドライン
- `encoding/binary` + `binary.BigEndian` で書き込み
- FLIS/EOFは完全固定値なのでパッケージレベル変数またはconst的に定義可能
- FCISのテキスト長はPalmDOCヘッダーのテキスト長と一致させる
- FLIS/FCISレコード番号はMOBIヘッダーに記録（Task 01との連携）

## テスト方針
- FLISレコードが正確に36バイトであること
- FLIS先頭4バイトが "FLIS" であること
- FCISレコードが正確に44バイトであること
- FCIS先頭4バイトが "FCIS" であること
- FCISのテキスト長フィールド（オフセット20）が入力値と一致すること
- EOFレコードが正確に4バイトで0xE98E0D0Aであること

## 完了条件
- [x] FLIS生成関数（36バイト固定）
- [x] FCIS生成関数（テキスト長パラメータ付き、44バイト）
- [x] EOF生成関数（4バイト固定）
- [x] 全テストがパス
